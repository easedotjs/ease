(()=>{if(!ease)throw new Error("This library requires Ease to be loaded first");var d=ease.config.router?.root||"",i={route:null,args:{},listeners:[],push(e){this._navigate(e),window.history.pushState({},"",e)},replace(e){this._navigate(e),window.history.replaceState({},"",e)},_navigate(e){let t=this._resolvePath(e),[r,l]=t.split("?");if(this._updateArgs(l),this.route===r){this._notifyListeners();return}fetch(`${d}${r}`).then(a=>a.text()).then(a=>{let s=new DOMParser().parseFromString(a,"text/html"),h=s.querySelector("body");s.querySelector("body>template")&&(h=s.querySelector("body>template")),s.head.querySelectorAll("script").forEach(n=>{if(document.querySelector(`script[src="${n.src}"]`))return;let o=document.createElement("script");o.src=n.src,o.type=n.type,o.async=!0,document.head.appendChild(o)}),document.title=s.querySelector("title").textContent,document.body.innerHTML=h.innerHTML,s.head.querySelectorAll('link[rel="component"]').forEach(n=>{let o=n.attributes.name?.value,c=n.attributes.href?.value;document.dispatchEvent(new CustomEvent("ease_load_component",{detail:{name:o,href:c}}))}),this.route=r,this._notifyListeners(),this.listeners=[]}).catch(a=>{})},_resolvePath(e){return e==="/"||e===""?"index":e.replace(/^\//,"")},_updateArgs(e){this.args={},e&&e.split("&").forEach(t=>{let[r,l]=t.split("=");this.args[r]=l})},_notifyListeners(){this.listeners.forEach(e=>{e(this.route,this.args)})},onRouteChange(e){this.listeners.push(e),e(this.route,this.args)},createRoute(e,t){this.routes.push({path:e,file:t})}};i._currentRoute=window.location.pathname.split("?")[0];i._updateArgs(window.location.search.substring(1));var u=class extends HTMLElement{constructor(){super()}connectedCallback(){let t=document.createElement("a");t.href=this.getAttribute("href"),t.textContent=this.textContent,this.textContent="",this.appendChild(t),t.addEventListener("click",r=>{r.preventDefault(),i.push(this.getAttribute("href"))})}};customElements.define("nav-to",u);window.addEventListener("popstate",()=>{i._navigate(window.location.href)});ease.extensions.add({name:"@easedotjs/router",objects:{router:i}});})();
//# sourceMappingURL=index.min.js.map
