(()=>{if(!ease)throw new Error("This library requires Ease to be loaded first");var{warn:b,error:d,info:x}=ease.log,{config:y}=ease,h={};async function $(t,l){let o,n,s,c=[];return await fetch(l).then(async i=>({content:await i.text(),code:i.status})).then(({content:i,code:f})=>{if(f===404){o=document.createElement("template"),s=document.createElement("style"),y.core.debug&&(d(`Failed to load component '${t}' from ${l}`),o.innerHTML=`<div><strong>Ease Component Error:</strong> Failed to load component '${t}' from ${l}</div>`,s.innerText=":host { color: #800; padding: 1rem; }");return}let a=new DOMParser().parseFromString(i,"text/html");a.querySelector("template")?(o=a.querySelector("template"),n=a.querySelector("script:not([src])"),s=a.querySelector("style")):(o=a.createElement("template"),o.innerHTML=i,a.body.appendChild(o)),o.content.querySelectorAll('meta[name="attribute"]').forEach(r=>{let e=r.attributes.content.value;c[e]={name:e,default:r.attributes.default?.value,style:!!r.attributes.style},r.remove()})}).catch(i=>{d(`Failed to load component '${t}' from ${l}`,i)}),{template:o,script:n,style:s,attributes:c}}async function C(t){let l=t.attributes.name?.value,o=t.attributes.href?.value;w(l,o)}async function w(t,l){if(!t)return d(`Component ${linkNode} missing name attribute`);if(!l)return d(`Component '${t}' missing href`);if(!t.includes("-"))return d(`Component '${t}' must contain a hyphen`);if(h[t])return x(`Component '${t}' already exists in registry, skipping load`);let o=await $(t,l);if(!o.template)return d(`Component '${t}' missing template`);h[t]=o,customElements.define(t,class extends HTMLElement{constructor(){super();let n=h[t];if(!n)return d(`Component '${t}' not found in registry`);let s=this.attachShadow({mode:"open"});this.shadow=s;let c=n.template.content.querySelectorAll("link");if(c.forEach(C),c.forEach(i=>i.remove()),s.appendChild(n.template.content.cloneNode(!0)),n.style&&s.appendChild(n.style.cloneNode(!0)),n.script){let i=n.script.textContent,f=new Blob([i],{type:"text/javascript"}),g=URL.createObjectURL(f),a=[];s.querySelectorAll("[id]").forEach(r=>{a[r.id]=r}),import(g).then(r=>{if(!r.default&&!n.script.attributes["no-warn"])return b(`Component '${t}' contains script tag but does not export a default. Use the no-warn attribute on the script tag if this is the intended behavior`);if(!r.default&&n.script.attributes["no-warn"])return;let e={root:s,el:a,elements:a,attr:this.attributes,attributes:this.attributes,extensions:{},get ex(){return this.extensions},get[y.inject.name](){return this.extensions}};y.inject.extensions.forEach(u=>{u.methods?.forEach?.(m=>{if(e.extensions[m.name])return b(`Extension method '${m.name}' already exists in extensions, skipping`);e.extensions[m.name]=m}),e.extensions={...e.extensions,...u.objects}}),console.log(e),r.default(e),n.attributes.forEach(u=>{console.error(u)})});let p={};if(Object.keys(n.attributes).forEach(r=>{let e=n.attributes[r];this.shadow.dispatchEvent(new CustomEvent("attributeChanged",{detail:{name:e,oldValue:null,newValue:this.getAttribute(e)}})),e.style&&this.getAttribute(e.name)&&(p[e.name]=this.getAttribute(e.name))}),Object.keys(p).length>0){let r=document.createElement("style"),e=":host {";Object.keys(p).forEach(u=>{e+=`--${u}: ${p[u]};`}),e+="}",r.innerHTML=e,s.appendChild(r)}}}attributeChangedCallback(n,s,c){this.shadow.dispatchEvent(new CustomEvent("attributeChanged",{detail:{name:n,oldValue:s,newValue:c}}))}static get observedAttributes(){return Object.values(h[t].attributes)}})}document.addEventListener("ease_load_component",t=>{t.detail.name&&w(t.detail.name,t.detail.href)});var E=document.querySelectorAll(['link[rel="component"]']);E?E.forEach(C):b("No components found");})();
//# sourceMappingURL=index.min.js.map
